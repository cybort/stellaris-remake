###
# This file is part of a project hosted at https://github.com/stellaris-mods
# Copyright (c) 2017 folk@folk.wtf
#
# This program is free software; you can redistribute it and/or modify
# it under the terms of the GNU General Public License as published by
# the Free Software Foundation; either version 3 of the License, or
# (at your option) any later version.
#
# This program is distributed in the hope that it will be useful,
# but WITHOUT ANY WARRANTY; without even the implied warranty of
# MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
# GNU General Public License for more details.
#
# You should have received a copy of the GNU General Public License
# along with this program; if not, write to the Free Software Foundation,
# Inc., 51 Franklin Street, Fifth Floor, Boston, MA 02110-1301  USA
###

# XXX technosphere country should get extra, has 4x hangars

# Individual ships
zhow_spawn_fighter_swarm = {
	create_ship = {
		name = ""
		design = "Swarm Tiny"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}
zhow_spawn_fighter_ai = {
	create_ship = {
		name = ""
		design = "AI Chip"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}
zhow_spawn_fighter_hiver = {
	create_ship = {
		name = ""
		design = "Hive Fighter"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}

zhow_spawn_fighter_fe_jump = {
	create_ship = {
		name = ""
		design = "Zip"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}
zhow_spawn_bomber_fe_jump = {
	create_ship = {
		name = ""
		design = "Zap"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}
zhow_spawn_fighter_fe_psijump = {
	create_ship = {
		name = ""
		design = "Psi-Zip"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}
zhow_spawn_bomber_fe_psijump = {
	create_ship = {
		name = ""
		design = "Psi-Zap"
		upgradable = no
		effect = { set_timed_ship_flag = { flag = "zhow_timed_life" days = 90 } }
	}
}

# ===========================
# Station spawns
#

# NAME_Hive_Asteroid has 3x HIVE_STRIKE_CRAFT
# count = 20
# regeneration_per_day = 0
# launch_time = 0.2
# Our crafts have a bit more damage, but lower weapon range
# 20 range vs 40 vanilla
zhow_spawn_hiver_fleet = {
	fleet_event = { id = zhowStrike.100 days = 120 }
	create_fleet = {
		effect = {
			set_owner = ROOT.owner
			while = {
				count = 60
				zhow_spawn_fighter_hiver = yes
			}
			set_location = ROOT
			set_fleet_stance = aggressive
			set_aggro_range = 140
			set_aggro_range_measure_from = ROOT
		}
	}
}

# large station has 3x SWARM_STRIKE_CRAFT
# small station has 1x SWARM_STRIKE_CRAFT
# count = 10
# regeneration_per_day = @regen
# launch_time = 1.0
zhow_spawn_swarm_fleet = {
	fleet_event = { id = zhowStrike.100 days = 120 }
	create_fleet = {
		effect = {
			set_owner = ROOT.owner
			while = {
				count = 20
				zhow_spawn_fighter_swarm = yes
			}
			set_location = ROOT
			set_fleet_stance = aggressive
			set_aggro_range = 80
			set_aggro_range_measure_from = ROOT
		}
	}
}

# AI_STRIKE_CRAFT has 100hp and launches 10x strike
# final_core_ai 16x AI_STRIKE_CRAFT
# core_ai 8x AI_STRIKE_CRAFT
zhow_spawn_ai_fleet = {
	fleet_event = { id = zhowStrike.100 days = 120 }
	create_fleet = {
		effect = {
			set_owner = ROOT.owner
			while = {
				count = 120
				zhow_spawn_fighter_ai = yes
			}
			set_location = ROOT
			set_fleet_stance = aggressive
			set_aggro_range = 80
			set_aggro_range_measure_from = ROOT
		}
	}
}

# ===========================
# Ship spawns
#

# large_ship_carrier_swarm has 4x SWARM_STRIKE_CRAFT
# queen_swarm has 3x
# count = 10
# regeneration_per_day = @regen
# launch_time = 1.0
zhow_spawn_swarm = {
	while = {
		count = 30
		zhow_spawn_fighter_swarm = yes
	}
}

# set_country_flag = fallen_empire_2 uses psi jump
# the other FEs use JUMP_DRIVE_1
# massive_ship_fallen_empire has 4x strike
# large_ship_fallen_empire has 2x strike
# 8x ships from each component = 16/32
zhow_spawn_fallen_massive = {
	ROOT = {
		if = {
			limit = { owner = { has_country_flag = "fallen_empire_2" } }
			while = {
				count = 16
				zhow_spawn_fighter_fe_psijump = yes
			}
			while = {
				count = 16
				zhow_spawn_bomber_fe_psijump = yes
			}
			else = {
				while = {
					count = 16
					zhow_spawn_fighter_fe_jump = yes
				}
				while = {
					count = 16
					zhow_spawn_bomber_fe_jump = yes
				}
			}
		}
	}
}
zhow_spawn_fallen_large = {
	ROOT = {
		if = {
			limit = { owner = { has_country_flag = "fallen_empire_2" } }
			while = {
				count = 8
				zhow_spawn_fighter_fe_psijump = yes
			}
			while = {
				count = 8
				zhow_spawn_bomber_fe_psijump = yes
			}
			else = {
				while = {
					count = 8
					zhow_spawn_fighter_fe_jump = yes
				}
				while = {
					count = 8
					zhow_spawn_bomber_fe_jump = yes
				}
			}
		}
	}
}


# Uses 2x standard fighters and 2x bomber = 32 strikers
zhow_spawn_sphere = {
	while = {
		count = 16
		zcarrier_fighter = yes
	}
	while = {
		count = 16
		zcarrier_bomber = yes
	}
}
